C51 COMPILER V9.52.0.0   AROM                                                              10/08/2019 19:58:40 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE AROM
OBJECT MODULE PLACED IN .\obj\arom.obj
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE src\arom.c BROWSE INCDIR(.\inc;.\lib) DEBUG OBJECTEXTEND PRINT(.\list\arom.
                    -lst) TABS(2) OBJECT(.\obj\arom.obj)

line level    source

   1          
   2          /*
   3           * arom.c
   4           * Kit Shaw
   5           * 2019.10.4
   6           */
   7           
   8          #include "SC92F844X_C.h"
   9          #include "arom.h"
  10          
  11          unsigned char arom_level;  
  12          unsigned int arom_work_count;
  13          void arom_init(void)
  14          {
  15   1        P5CON |= 1<<5;  //P55输出模式
  16   1        arom_off();
  17   1        arom_level = 0;
  18   1      }
  19          
  20          void arom_task(void)
  21            // 1s掉用一次
  22          {
  23   1        switch(arom_level)
  24   1        {
  25   2          case 1://低档工作10分钟停10分钟
  26   2           if(arom_work_count == 0)arom_on();
  27   2           if(arom_work_count == 600)arom_off();
  28   2           if(++arom_work_count>=1200) arom_work_count = 0;
  29   2          break;
  30   2          case 2://中档 : 工作30分钟停10分钟
  31   2            if(arom_work_count == 0)arom_on();
  32   2            if(arom_work_count == 1800)arom_off();
  33   2            if(++arom_work_count>=2400) arom_work_count = 0;
  34   2          break;
  35   2          case 3://高档: 连续工作
  36   2            arom_on();
  37   2          break;
  38   2          default:
  39   2            arom_off();
  40   2          break;
  41   2        }
  42   1      }
  43          
  44          void arom_on(void)
  45          {
  46   1        AROM_PIN = 1;
  47   1      }
  48          
  49          void arom_off(void)
  50          {
  51   1        AROM_PIN = 0;
  52   1      }
  53          
  54          void regulate_arom_level(void)
C51 COMPILER V9.52.0.0   AROM                                                              10/08/2019 19:58:40 PAGE 2   

  55          //调整转, 掉用一次切换一次, 自动, 低, 中, 高依次循环
  56          {
  57   1        if(++arom_level> 3) arom_level = 0; 
  58   1        arom_work_count = 0;
  59   1      }
  60          
  61          void set_arom_level(unsigned char level)
  62          {
  63   1        arom_level = level;
  64   1      }
  65          
  66          unsigned char read_arom_level(void)
  67          {
  68   1        return arom_level;
  69   1      }
  70          
  71          
  72          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    146    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
