C51 COMPILER V9.52.0.0   AROM                                                              11/01/2019 20:20:50 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE AROM
OBJECT MODULE PLACED IN .\obj\arom.obj
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE src\arom.c BROWSE INCDIR(.\inc;.\lib) DEBUG OBJECTEXTEND PRINT(.\list\arom.
                    -lst) TABS(2) OBJECT(.\obj\arom.obj)

line level    source

   1          
   2          /*
   3           * arom.c
   4           * Kit Shaw
   5           * 2019.10.4
   6           */
   7           
   8          #include "SC92F844X_C.h"
   9          #include "arom.h"
  10          
  11          unsigned char arom_level;  
  12          unsigned int arom_work_count;
  13          void arom_init(void)
  14          {
  15   1        P5CON |= 1<<5;  //P55输出模式
  16   1        arom_off();
  17   1        arom_level = 0;
  18   1      }
  19          
  20          void arom_task(void)
  21            // 1s掉用一次
  22            // low 工作1分钟停12分钟
  23            // mid 工作1分钟停8分钟
  24            // high 工作1分钟停4分钟
  25          {
  26   1        switch(arom_level)
  27   1        {
  28   2          case 1://低档工作10分钟停10分钟
  29   2           if(arom_work_count == 0)arom_on();
  30   2           if(arom_work_count == 60)arom_off();
  31   2           if(++arom_work_count>=780) arom_work_count = 0;
  32   2          break;
  33   2          case 2://中档 : 工作30分钟停10分钟
  34   2            if(arom_work_count == 0)arom_on();
  35   2            if(arom_work_count == 60)arom_off();
  36   2            if(++arom_work_count>=540) arom_work_count = 0;
  37   2          break;
  38   2          case 3://高档: 连续工作
  39   2            if(arom_work_count == 0)arom_on();
  40   2            if(arom_work_count == 60)arom_off();
  41   2            if(++arom_work_count>=300) arom_work_count = 0;
  42   2          break;
  43   2          default:
  44   2            arom_off();
  45   2          break;
  46   2        }
  47   1      }
  48          
  49          void arom_on(void)
  50          {
  51   1        AROM_PIN = 1;
  52   1      }
  53          
  54          void arom_off(void)
C51 COMPILER V9.52.0.0   AROM                                                              11/01/2019 20:20:50 PAGE 2   

  55          {
  56   1        AROM_PIN = 0;
  57   1      }
  58          
  59          void regulate_arom_level(void)
  60          //调整转, 掉用一次切换一次, 自动, 低, 中, 高依次循环
  61          {
  62   1        if(++arom_level> 3) arom_level = 0; 
  63   1        arom_work_count = 0;
  64   1      }
  65          
  66          void set_arom_level(unsigned char level)
  67          {
  68   1        arom_level = level;
  69   1      }
  70          
  71          unsigned char read_arom_level(void)
  72          {
  73   1        return arom_level;
  74   1      }
  75          
  76          
  77          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    178    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
