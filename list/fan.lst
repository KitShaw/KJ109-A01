C51 COMPILER V9.52.0.0   FAN                                                               10/03/2019 10:55:28 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE FAN
OBJECT MODULE PLACED IN .\obj\fan.obj
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE src\fan.c BROWSE INCDIR(.\inc;.\lib) DEBUG OBJECTEXTEND PRINT(.\list\fan.ls
                    -t) TABS(2) OBJECT(.\obj\fan.obj)

line level    source

   1          
   2          
   3          /*
   4           *fan.c
   5           *Kit Shaw
   6           * 2019.10.2
   7           */
   8           
   9          #include "SC92F844X_C.h"
  10          #include "led.h"
  11          #include "fan.h"
  12          #include "filter.h"
  13          #include "IAP.h"
  14          #include "ion.H"
  15          
  16          unsigned char power_status;
  17          unsigned char fan_speed;  // 0智能, 1静音, 2中, 3高
  18          
  19          /*
  20          void set_power_status(unsigned char sta)
  21          {
  22            power_status = sta;
  23          }
  24          */
  25          unsigned char read_power_status(void)
  26          {
  27   1        return power_status;
  28   1      }
  29          
  30          void fan_init(void)
  31          {
  32   1        fan_speed = FAN_SPEED_AUTO;
  33   1      }
  34          
  35          
  36          
  37          void fan_pwm_start(void)
  38          {
  39   1        PWMCON |= 0x80; //
  40   1      }
  41          
  42          void fan_pwm_stop(void)
  43          {
  44   1        PWMCON &= 0x7f;
  45   1        FAN_PWM_PIN = 0;
  46   1      }
  47          
  48          
  49          /*
  50          void set_fan_speed(unsigned char speed)
  51          {
  52            
  53          }
  54          */
C51 COMPILER V9.52.0.0   FAN                                                               10/03/2019 10:55:28 PAGE 2   

  55          void regulate_fan_speed(void)
  56          //调整转, 掉用一次切换一次, 自动, 低, 中, 高依次循环
  57          {
  58   1        if(++fan_speed> FAN_SPEED_HIGH) fan_speed = FAN_SPEED_AUTO;
  59   1        //led_display_mode();
  60   1      }
  61          
  62          unsigned char read_fan_speed(void)
  63          {
  64   1        return fan_speed;
  65   1      }
  66          
  67          void power_on(void)
  68          {
  69   1        power_status = POWER_ON_STATUS;
  70   1        FAN_POWER_PIN = 1;
  71   1        fan_pwm_start();
  72   1      //  set_fan_speed(1);
  73   1        ion_on();
  74   1      }
  75          
  76          void power_off(void)
  77          {
  78   1        
  79   1        power_status = POWER_OFF_STATUS;  
  80   1        FAN_POWER_PIN = 0;
  81   1        fan_pwm_stop();
  82   1        ion_off();
  83   1      }
  84          
  85          
  86          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     55    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
