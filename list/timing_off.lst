C51 COMPILER V9.52.0.0   TIMING_OFF                                                        12/08/2019 18:12:20 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE TIMING_OFF
OBJECT MODULE PLACED IN .\obj\timing_off.obj
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE src\timing_off.c BROWSE INCDIR(.\inc;.\lib) DEBUG OBJECTEXTEND PRINT(.\list
                    -\timing_off.lst) TABS(2) OBJECT(.\obj\timing_off.obj)

line level    source

   1          
   2          /*
   3           * timing_off.c
   4           * Kit Shaw
   5           * 2019.10.4
   6           */
   7           
   8          #include "SC92F844X_C.h"
   9          #include "timing_off.h"
  10          #include "fan.h"
  11          
  12          unsigned char timing_off_level;  
  13          unsigned int timing_off_count;
  14          void timing_off_init(void)
  15          {
  16   1        timing_off_level = 0;
  17   1      }
  18          
  19          void timing_off_task(void)
  20            // 1s掉用一次
  21          {
  22   1        switch(timing_off_level)
  23   1        {
  24   2          case 1://1H
  25   2            if(++timing_off_count>= 3600) power_off();
  26   2          break;
  27   2          case 2://2H
  28   2            if(++timing_off_count>=7200) power_off();
  29   2          break;
  30   2          case 3://4H
  31   2            if(++timing_off_count>=14400) power_off();
  32   2          break;
  33   2          case 4://8H
  34   2            if(++timing_off_count>=28800) power_off();
  35   2          break;
  36   2          default:
  37   2            
  38   2          break;
  39   2        }
  40   1      }
  41          void regulate_timing_off_level(void)
  42          //调整转, 掉用一次切换一次, 自动, 低, 中, 高依次循环
  43          {
  44   1        if(++timing_off_level> 4) timing_off_level = 0; 
  45   1        timing_off_count = 0;
  46   1      }
  47          
  48          void reset_timing_off_level(void)
  49          {
  50   1        timing_off_level = 0;
  51   1      }
  52          
  53          unsigned char read_timing_off_level(void)
  54          {
C51 COMPILER V9.52.0.0   TIMING_OFF                                                        12/08/2019 18:12:20 PAGE 2   

  55   1        return timing_off_level;
  56   1      }
  57          
  58          
  59          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    123    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
